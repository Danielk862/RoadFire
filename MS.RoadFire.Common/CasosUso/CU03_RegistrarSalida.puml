@startuml CU03_RegistrarSalida
|Vendedor|
start
:Seleccionar "Nueva salida";
if (¿Permiso Salidas?) then (sí)
  :Seleccionar producto;
  :Ingresar cantidad, fecha, docVenta, bodega, notas;
  if (validar campos?) then (sí)
    if (stock suficiente?) then (sí)
      if (producto activo?) then (sí)
        :Confirmar registro;
        :Descontar stock;
        :Registrar movimiento en historial;
        :Mostrar confirmación;
      else (no)
        :Bloquear venta de productos inactivos;
      endif
    else (no)
      :Notificar "Stock insuficiente" y bloquear operación;
    endif
  else (no)
    :Impedir guardado y mostrar errores;
  endif
else (no)
  :Denegar acceso;
endif

:Finalizar salida de producto;
note right
  Reglas de negocio:
  - Cantidad > 0.
  - No permitir stock negativo salvo autorización.
  - Fecha de salida no posterior al día actual salvo autorización.
  - Soporte multi-bodega cuando aplique.
end note

stop
@enduml
