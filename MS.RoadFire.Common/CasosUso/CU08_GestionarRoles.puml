@startuml CU08_GestionarRoles
|Administrador|
start
:Abrir módulo Roles;
:Crear/Actualizar/Eliminar/Listar rol;
if (crear?) then (sí)
  :Ingresar datos rol;
  if (nombre único?) then (sí)
    :Guardar rol;
  else (no)
    :Notificar duplicado;
  endif
elseif (actualizar?) then (sí)
  :Editar rol;
  :Guardar cambios;
elseif (eliminar?) then (sí)
  if (rol protegido o con usuarios?) then (sí)
    :Bloquear o reasignar;
  else (no)
    :Eliminar rol;
  endif
elseif (listar?) then (sí)
  :Mostrar lista roles;
endif

:Finalizar gestión roles;
note right
  Reglas de negocio:
  - Siempre debe existir al menos un rol Administrador.
  - No eliminar rol con usuarios asociados sin reasignar.
  - Cambios auditables.
end note

stop
@enduml
